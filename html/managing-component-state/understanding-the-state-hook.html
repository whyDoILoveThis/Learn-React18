<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="http://example.com/favicon.png" />
    <link rel="stylesheet" href="../../css/normalize.css" />
    <link rel="stylesheet" href="../../css/styles.css" />
    <title>Understanding The State Hook</title>
  </head>
  <body>
    <a href="../../index.html" class="home">HOME</a>
    <section class="centerer">
      <article class="main-wrap">
        <h1>Understanding The State Hook</h1>
        <h2>What we have learned about state so far..</h2>
        <h3>
          We have learned that using the state hook, we can add state to a
          component
        </h3>
        <h3 class="red">
          There are few more things you need to know about the state hook.
        </h3>
        <h2>React updates state asynchronously</h2>
        <h3>This means it is not updated immediately.</h3>
        <h2>Example</h2>
        <h3>Let's take this handleClick function for example.</h3>
        <h4>When we console.log isVisible...</h4>
        <img src="../../imgs/understanding-the-state-hook/example.PNG" alt="" />
        <h4>
          We will get false even though on the line above it we set it to
          true...
        </h4>
        <img
          src="../../imgs/understanding-the-state-hook/false-in-the-console.PNG"
          alt=""
        />
        <h2>Explanation</h2>
        <h3>
          So, is was <b class="red">not applied immediately(synchronously)</b>,
          it was applied asynchronously.
        </h3>
        <h3>Meaning in the future.</h3>
        <h3>This is done for performance reasons.</h3>
        <h3>
          Because, as part of handling an event, we might set a bunch of
          different state vars...
        </h3>
        <h4>For example...</h4>
        <img
          src="../../imgs/understanding-the-state-hook/multiple-state-vars.PNG"
          alt=""
        />
        <h3>
          If react rerendered the component everytime we called a set function,
          we would have too many rerenders, effectively slowing down the
          application.
        </h3>
        <h2>How async improves performance</h2>
        <h3>
          To improve performance, React takes all the updates, batches them, and
          then applies them at a later time.
        </h3>
        <h4>
          The 'later time' is after this event handler finishes executing...
        </h4>
        <img
          src="../../imgs/understanding-the-state-hook/the-later-time-is.PNG"
          alt=""
        />
        <h3>
          At that point, React applies all the updates at once, rerenders the
          component in the updated state.
        </h3>
        <h2>State is stored outside of components</h2>
        <h4>Let's say we have a var like this...</h4>
        <img
          src="../../imgs/understanding-the-state-hook/count-var.PNG"
          alt=""
        />
        <h3>
          We know that in JS the vars of a function are scoped to that function.
        </h3>
        <h3>
          That means when our function(our component) finishes execution, the
          var is removed from memory.
        </h3>
        <h3>
          AND THAT MEANS, when React rerenders this component it's going to call
          the app function again, and our count var would be remade again and
          initialized to 0 again.
        </h3>
        <h3>So the ++ we applied before will be lost.</h3>
        <h3>
          This is why we use the state hook(useState) to store the state outside
          of this component.
        </h3>
        <h4>So, somewhere, wherever react does react stuff...</h4>
        <h3>
          React is going to store all the state variables for this component,
          and it will remove those variables when the component is no longer
          visible on the screen.
        </h3>
        <h2>We can only use hooks at the top level of a component</h2>
        <h4>Let's take these states for example...</h4>
        <img
          src="../../imgs/understanding-the-state-hook/state-examples.PNG"
          alt=""
        />
        <h3>
          The names we have chosen are just local identifiers in this function.
          <em class="red">React is not aware of the names.</em>
        </h3>
        <h3>
          So when we use the state hook, we are just telling React 'Hey React, I
          need to store a value.'
        </h3>
        <h2>How React stores the values</h2>
        <h3>
          Somewhere, in a location chosen by React, our values would get stored
          in an array.
        </h3>
        <h4>
          The comment in the code below simulates the array react would store
          our states in...
        </h4>
        <img
          src="../../imgs/understanding-the-state-hook/how-react-stores-state-values.PNG"
          alt=""
        />
        <h4 class="red">
          So React relys on the <em class="blu">order</em> in which elements are
          placed in code to apply the values to the variables.
        </h4>
        <h3>
          That means we cannot initialize hooks in for loops, if statement, or
          <em class="red">anything ever</em>.
        </h3>
        <h3 class="blu">
          Create them all at the top of the component. Please.
        </h3>
        <h2>Key Take-aways</h2>
        <ul>
          <li>
            <a href="#Reactupdatesstateasynchronously"
              ><em class="ul-li">React updates state asynchronously</em></a
            >
          </li>
          <li>
            <a href="#Stateisstoredoutsideofcomponents"
              ><em class="ul-li">State is stored outside of components</em></a
            >
          </li>
          <li>
            <a href="#Wecanonlyusehooksatthetoplevelofacomponent"
              ><em class="ul-li"
                >Use hooks at the top level of your component.</em
              ></a
            >
          </li>
        </ul>
      </article>
    </section>
    <script src="../../JS/main.js"></script>
  </body>
</html>
